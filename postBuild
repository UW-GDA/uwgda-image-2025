#!/bin/bash

# Create a fix for PYTHONPATH in user's home directory
cat << 'EOF' > $HOME/.fix_pythonpath.sh
# Get correct Python site-packages without duplicates
if [ -z "$PYTHONPATH" ]; then
    SITE_PACKAGES=$(python -m site --user-site)
    export PYTHONPATH="${SITE_PACKAGES}"
fi
EOF

# Make it executable
chmod +x $HOME/.fix_pythonpath.sh

# Add sourcing to .bashrc if it's not already there
if ! grep -q "source.*fix_pythonpath.sh" $HOME/.bashrc; then
    echo "source \$HOME/.fix_pythonpath.sh" >> $HOME/.bashrc
fi
